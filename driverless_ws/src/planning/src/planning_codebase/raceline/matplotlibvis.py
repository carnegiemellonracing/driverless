import numpy as np
import matplotlib.pyplot as plt

def evaluate_polynomial(coeffs, t):
    """
    Evaluate a cubic polynomial given its coefficients and parameter t.
    coeffs: List of coefficients [a3, a2, a1, a0] for t^3, t^2, t, constant.
    t: Array of parameter values.
    """
    return coeffs[3] * t**3 + coeffs[2] * t**2 + coeffs[1] * t + coeffs[0]

def plot_parametric_cubic_polynomials(input_data_1, input_data_2, num_points=100):
    """
    Plot a list of parametric cubic polynomials (x(t), y(t)).
    input_data: List of tuples. Each tuple contains:
                - A list of tuples representing grouped parametric splines (x(t), y(t)).
                - A tuple (start_t, end_t) specifying the range of t for the group.
    num_points: Number of points to evaluate for each polynomial.
    """
    plt.figure(figsize=(12, 8))
    colors = ['red', 'blue', 'green', 'orange', 'purple']
    
    for input_data in [input_data_1, input_data_2]:
        for group_index, (splines, t_range) in enumerate(input_data):
            group_size = len(splines)
            start_t, end_t = t_range
            group_color = colors[group_index % 18 % len(colors)]
            
            for spline_index, (x_coeffs, y_coeffs) in enumerate(splines):
                # Determine t_range for this spline
                if spline_index == 0:
                    t_start, t_end = start_t, 1  # First spline gets group start_t
                elif spline_index == group_size - 1:
                    t_start, t_end = 0, end_t  # Last spline gets group end_t
                else:
                    t_start, t_end = 0, 1  # Intermediate splines default to [0, 1]
                
                t = np.linspace(t_start, t_end, num_points)
                
                # Evaluate x(t) and y(t)
                x_vals = evaluate_polynomial(x_coeffs, t)
                y_vals = evaluate_polynomial(y_coeffs, t)
                
                # Plot the parametric curve
                plt.plot(x_vals, y_vals, color=group_color, label=f'Group {group_index + 1}' if spline_index == 0 else None)
    
    plt.title("Parametric Cubic Polynomials")
    plt.xlabel("x(t)")
    plt.ylabel("y(t)")
    plt.grid(True)
    # plt.legend()
    plt.show()

# Example Input Data
input_data = [([
([0,2,-4,2],[0,2,0,0])
,
([0,0,0,0],[2,2,0,0])
,
([0,0,0,0],[4,2,0,0])
,
([0,0,0,0],[6,2,0,0])
,
([0,0,0,0],[8,2,0,0])
,
([0,0,0,0],[10,2,0,0])
,
([0,0,0,0],[12,2,0,0])
,
([0,0,0,0],[14,2,0,0])
,
([0,0,0,0],[16,2,0,0])
,
([0,0,0,0],[18,2,0,0])
,
([0,0,0.401924,-0.401924],[20,2,-0.5,0.5])
,
([0,-0.401924,-0.107695,-0.294229],[22,2.5,1.40192,-0.901924])
,
([-0.803848,-1.5,-0.990381,0.294229],[25,2.59808,-0.107695,-0.294229])
,
([-3,-2.59808,-1.30385,0.901924],[27.1962,1.5,-0.990381,0.294229])
],
 (0, 0.0238968)
),
([
([-3,-2.59808,-1.30385,0.901924],[27.1962,1.5,-0.990381,0.294229])
],
 (0.0238968, 0.0735136)
),
([
([-3,-2.59808,-1.30385,0.901924],[27.1962,1.5,-0.990381,0.294229])
],
 (0.0735136, 0.123016)
),
([
([-3,-2.59808,-1.30385,0.901924],[27.1962,1.5,-0.990381,0.294229])
,
([-6,-2.5,1,-0.5],[28,0.401924,-0.803848,0.401924])
,
([-8,-2,0,0],[28,0,0,0])
,
([-10,-2,0,0],[28,0,0,0])
,
([-12,-2,0.5,-0.5],[28,0,0.401924,-0.401924])
,
([-14,-2.5,-1.40192,0.901924],[28,-0.401924,-0.107695,-0.294229])
,
([-17,-2.59808,0.107695,0.294229],[27.1962,-1.5,-0.990381,0.294229])
],
 (0.123016, 0.078674)
),
([
([-17,-2.59808,0.107695,0.294229],[27.1962,-1.5,-0.990381,0.294229])
,
([-19.1962,-1.5,0.380781,0.315371],[25,-2.59808,-1.30385,0.901924])
],
 (0.078674, 0.0281299)
),
([
([-19.1962,-1.5,0.380781,0.315371],[25,-2.59808,-1.30385,0.901924])
],
 (0.0281299, 0.0731014)
),
([
([-19.1962,-1.5,0.380781,0.315371],[25,-2.59808,-1.30385,0.901924])
,
([-20,0.207676,2.32785,-1.31632],[22,-2.5,1,-0.5])
],
 (0.0731014, 0.0795291)
),
([
([-20,0.207676,2.32785,-1.31632],[22,-2.5,1,-0.5])
,
([-18.7808,0.9144,0.3048,-0.6096],[20,-2,0,0])
],
 (0.0795291, 0.0776183)
),
([
([-18.7808,0.9144,0.3048,-0.6096],[20,-2,0,0])
,
([-18.1712,-0.3048,-1.8288,0.9144],[18,-2,0,0])
,
([-19.3904,-1.2192,0,0],[16,-2,0,0])
],
 (0.0776183, 0.0476873)
),
([
([-19.3904,-1.2192,0,0],[16,-2,0,0])
,
([-20.6096,-1.2192,-0.9144,0.9144],[14,-2,0,0])
],
 (0.0476873, 0.0501399)
),
([
([-20.6096,-1.2192,-0.9144,0.9144],[14,-2,0,0])
,
([-21.8288,-0.3048,1.524,-0.6096],[12,-2,0,0])
],
 (0.0501399, 0.0934507)
),
([
([-21.8288,-0.3048,1.524,-0.6096],[12,-2,0,0])
,
([-21.2192,0.9144,1.2192,-0.9144],[10,-2,0,0])
,
([-20,0.6096,-1.2192,0.6096],[8,-2,0,0])
],
 (0.0934507, 0.0506556)
),
([
([-20,0.6096,-1.2192,0.6096],[8,-2,0,0])
,
([-20,0,-0.401924,0.401924],[6,-2,0.5,-0.5])
],
 (0.0506556, 0.10313)
),
([
([-20,0,-0.401924,0.401924],[6,-2,0.5,-0.5])
,
([-20,0.401924,0.107695,0.294229],[4,-2.5,-1,0.5])
,
([-19.1962,1.5,0.990381,-0.294229],[1,-3,-1.5,1.5])
],
 (0.10313, 0.0718682)
),
([
([-19.1962,1.5,0.990381,-0.294229],[1,-3,-1.5,1.5])
],
 (0.0718682, 0.143295)
),
([
([-19.1962,1.5,0.990381,-0.294229],[1,-3,-1.5,1.5])
,
([-17,2.59808,1.30385,-0.901924],[-2,-1.5,3,-1.5])
],
 (0.143295, 0.0804472)
),
([
([-17,2.59808,1.30385,-0.901924],[-2,-1.5,3,-1.5])
,
([-14,2.5,-1,0.5],[-2,0,0,0])
,
([-12,2,0,0],[-2,0,0,0])
,
([-10,2,0,0],[-2,0,0,0])
,
([-8,2,0,0],[-2,0,0,0])
,
([-6,2,-1,1],[-2,0,-1,1])
],
 (0.0804472, 0.350485)
),
([
([-6,2,-1,1],[-2,0,-1,1])
,
([-4,3,4,-3],[-2,1,2,-1])
],
 (0.350485, 1)
),
([
([-4,3,4,-3],[-2,1,2,-1])
],
 (1, 1)
)]

input_data_2 = [([
([0,2,-4,2],[0,2,0,0])
,
([0,0,0,0],[2,2,0,0])
,
([0,0,0,0],[4,2,0,0])
,
([0,0,0,0],[6,2,0,0])
,
([0,0,0,0],[8,2,0,0])
,
([0,0,0,0],[10,2,0,0])
,
([0,0,0,0],[12,2,0,0])
,
([0,0,0,0],[14,2,0,0])
,
([0,0,0,0],[16,2,0,0])
,
([0,0,0,0],[18,2,0,0])
,
([0,0,0.401924,-0.401924],[20,2,-0.5,0.5])
,
([0,-0.401924,-0.107695,-0.294229],[22,2.5,1.40192,-0.901924])
,
([-0.803848,-1.5,-0.990381,0.294229],[25,2.59808,-0.107695,-0.294229])
],
 (0, 0.105189)
),
([
([-0.803848,-1.5,-0.990381,0.294229],[25,2.59808,-0.107695,-0.294229])
,
([-3,-2.59808,-1.30385,0.901924],[27.1962,1.5,-0.990381,0.294229])
],
 (0.105189, 0.0397073)
),
([
([-3,-2.59808,-1.30385,0.901924],[27.1962,1.5,-0.990381,0.294229])
],
 (0.0397073, 0.0922353)
),
([
([-3,-2.59808,-1.30385,0.901924],[27.1962,1.5,-0.990381,0.294229])
,
([-6,-2.5,1,-0.5],[28,0.401924,-0.803848,0.401924])
,
([-8,-2,0,0],[28,0,0,0])
,
([-10,-2,0,0],[28,0,0,0])
,
([-12,-2,0.5,-0.5],[28,0,0.401924,-0.401924])
,
([-14,-2.5,-1.40192,0.901924],[28,-0.401924,-0.107695,-0.294229])
,
([-17,-2.59808,0.107695,0.294229],[27.1962,-1.5,-0.990381,0.294229])
],
 (0.0922353, 0.0764268)
),
([
([-17,-2.59808,0.107695,0.294229],[27.1962,-1.5,-0.990381,0.294229])
,
([-19.1962,-1.5,0.380781,0.315371],[25,-2.59808,-1.30385,0.901924])
],
 (0.0764268, 0.0283904)
),
([
([-19.1962,-1.5,0.380781,0.315371],[25,-2.59808,-1.30385,0.901924])
],
 (0.0283904, 0.0760184)
),
([
([-19.1962,-1.5,0.380781,0.315371],[25,-2.59808,-1.30385,0.901924])
,
([-20,0.207676,2.32785,-1.31632],[22,-2.5,1,-0.5])
],
 (0.0760184, 0.0887406)
),
([
([-20,0.207676,2.32785,-1.31632],[22,-2.5,1,-0.5])
,
([-18.7808,0.9144,0.3048,-0.6096],[20,-2,0,0])
,
([-18.1712,-0.3048,-1.8288,0.9144],[18,-2,0,0])
],
 (0.0887406, 0.021848)
),
([
([-18.1712,-0.3048,-1.8288,0.9144],[18,-2,0,0])
,
([-19.3904,-1.2192,0,0],[16,-2,0,0])
],
 (0.021848, 0.0722403)
),
([
([-19.3904,-1.2192,0,0],[16,-2,0,0])
,
([-20.6096,-1.2192,-0.9144,0.9144],[14,-2,0,0])
],
 (0.0722403, 0.0821269)
),
([
([-20.6096,-1.2192,-0.9144,0.9144],[14,-2,0,0])
,
([-21.8288,-0.3048,1.524,-0.6096],[12,-2,0,0])
,
([-21.2192,0.9144,1.2192,-0.9144],[10,-2,0,0])
],
 (0.0821269, 0.0556501)
),
([
([-21.2192,0.9144,1.2192,-0.9144],[10,-2,0,0])
,
([-20,0.6096,-1.2192,0.6096],[8,-2,0,0])
],
 (0.0556501, 0.103871)
),
([
([-20,0.6096,-1.2192,0.6096],[8,-2,0,0])
,
([-20,0,-0.401924,0.401924],[6,-2,0.5,-0.5])
,
([-20,0.401924,0.107695,0.294229],[4,-2.5,-1,0.5])
],
 (0.103871, 0.072317)
),
([
([-20,0.401924,0.107695,0.294229],[4,-2.5,-1,0.5])
,
([-19.1962,1.5,0.990381,-0.294229],[1,-3,-1.5,1.5])
],
 (0.072317, 0.157583)
),
([
([-19.1962,1.5,0.990381,-0.294229],[1,-3,-1.5,1.5])
,
([-17,2.59808,1.30385,-0.901924],[-2,-1.5,3,-1.5])
],
 (0.157583, 0.0850831)
),
([
([-17,2.59808,1.30385,-0.901924],[-2,-1.5,3,-1.5])
],
 (0.0850831, 0.188217)
),
([
([-17,2.59808,1.30385,-0.901924],[-2,-1.5,3,-1.5])
,
([-14,2.5,-1,0.5],[-2,0,0,0])
,
([-12,2,0,0],[-2,0,0,0])
,
([-10,2,0,0],[-2,0,0,0])
,
([-8,2,0,0],[-2,0,0,0])
,
([-6,2,-1,1],[-2,0,-1,1])
,
([-4,3,4,-3],[-2,1,2,-1])
],
 (0.188217, 1)
),
([
([-4,3,4,-3],[-2,1,2,-1])
],
 (1, 1)
)]

# Plot the parametric cubic polynomials
plot_parametric_cubic_polynomials(input_data, input_data_2)